<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Cancer Prognosis</title>
        {% load staticfiles %}
        <link rel="stylesheet" type="text/css" href="{% static 'progApp/general.css' %}" />
        <link rel="stylesheet" type="text/css" href="{% static 'bootstrap/css/bootstrap.css' %}" />
    </head>

    <body>
        <nav class="navbar navbar-default" role="navigation">
            <div class="container-fluid">
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav">
                    <li><a class="navbar-brand glyphicon glyphicon-home" aria-hidden="true" href=".."></a></li>
                    <li><a href="/lookup/">Look Up Information</a> </li>
                    <li><a href="/updatePatient/">Update Patient</a></li>
                    </ul>
                </div>
            </div>
        </nav>

        <div id="main" class="container" role="main">

            <h1>Result for Patient</h1>
            <h2> Patient information </h2>
            <div class="row main-text" id="cancer"> Cancer: </div>
            <div class="row main-text" id="stage"> Stage: </div>
            <div class="row main-text" id="age"> Age: </div>
            <div class="row main-text" id="gender"> Gender: </div>
            <div class="row main-text" id="survivalRate"> Survival Rate: </div>

            <div class="treatment-group" id="treatments">
                <h2> Treatment Options </h2>
            </div>

            <br>
            <br>

            <button type="button" class="btn btn-default"> Print for Patient </button>
            <button type="button" class="btn btn-default"> Print for Reference </button>

        </div>

        <!-- Load scripts if necessary-->
        <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <!-- Include all compiled plugins (below), or include individual files as needed -->
        <script src="{% static "bootstrap/js/bootstrap.min.js" %}"></script>

        <script type="text/javascript">
            console.log(json_data);
            var result = JSON.stringify(json_data);

            $.each(result, function(key, value) {
                // If the key is a treatment, we want to populate the treatment.
                if (key == "treatments") {

                    var treatmentOptions = result[key];
                    for (i=0; i < treatmentOptions.length; i++) {
                        var currentTreatment = treatmentOptions[i];
                        var treatmentDiv = document.createElement('div');
                        treatmentDiv.className = "row treatment";

                        // Add treatment name.
                        var treatmentName = document.createElement('div');
                        treatmentName.innerHTML="Treatment: " + currentTreatment['name'];
                        treatmentName.className = "treatment-name col-md-3";

                        // Add treatment cost.
                        var treatmentCost = document.createElement('div');
                        treatmentCost.innerHTML="Cost: " + currentTreatment['cost'];
                        treatmentCost.className = "treatment-cost col-md-3";

                        // Add treatment quality of life.
                        var treatmentQOL = document.createElement('div');
                        treatmentQOL.innerHTML="Quality of Life: " + currentTreatment['quality_of_life'];
                        treatmentQOL.className = "treatment-quality-of-life col-md-3";

                        treatmentDiv.appendChild(treatmentName);
                        treatmentDiv.appendChild(treatmentCost);
                        treatmentDiv.appendChild(treatmentQOL);
                        document.getElementById('treatments').appendChild(treatmentDiv);
                    }
                }

                // If it is another field (not a treatment), fill it in accordingly.
                else if (document.getElementById(key) != null) {
                    var child = document.getElementById(key);
                    child.innerHTML += value;
                }
            });
            
        </script>

    </body>
</html>
